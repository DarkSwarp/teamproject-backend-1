{
  "openapi": "3.0.3",
  "info": {
    "version": "1.0.1",
    "title": "Goose Track API Documentation",
    "description": "This is a REST API's for project Goose Track. [GitHub](https://github.com/HannaVakulenko/teamproject-backend-1) \n\n It is the task tracker with personal to-do list. \nThe project provides for the possibility of user registration, authentication and authorization. In addition, users can create and track their tasks, assign them by completion status, view their completion statistics over a period of time, and edit and delete their tasks. \n\n**Functional capabilities:**\n\nUser registration and authorization\n\nAbility to edit user profile and add review\n\nAdd, view, edit and delete tasks\n\nTask selection by date, possibility to determine/redefine priority and execution status\n\nDisplay of statistics for a certain period by execution statuses\n\nAbility to display the tasks on the calendar\n\nAbility to display tasks in a list by execution status\n\n**The technology stack used in the project:**\n\nNode.js - JavaScript runtime on the server\n\nExpress.js - a framework for developing web applications on Node.js\n\nMongoDB - NoSQL Database\n\nMongoose - a library for working with MongoDB in Node.js"
  },
  "consumes": ["application/json", "multipart/form-data"],
  "produces": ["application/json"],
  "servers": [
    {
      "url": "https://goose-track-gr25.onrender.com"
    },
    {
      "url": "http://localhost:8080"
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Authorization endpoints"
    },
    {
      "name": "Reviews",
      "description": "Reviews endpoints"
    },
    {
      "name": "Tasks",
      "description": "Tasks endpoints"
    }
  ],
  "paths": {
    "/api/auth/register": {
      "post": {
        "tags": ["Auth"],
        "summary": "User registration",
        "parameters": [],
        "requestBody": {
          "description": "Registration object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegistrationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "201": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistrationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request (invalid request body)"
          },
          "409": {
            "description": "User with this email is already exist"
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "User login",
        "parameters": [],
        "requestBody": {
          "description": "User login object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request (invalid request body)"
          },
          "401": {
            "description": "Email or password invalid"
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": ["Auth"],
        "summary": "User logout",
        "parameters": [],
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "Logout success"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/auth/account": {
      "get": {
        "tags": ["Auth"],
        "summary": "Get current user profile info",
        "parameters": [],
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "multipart/form-data": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "patch": {
        "tags": ["Auth"],
        "summary": "update user profile info",
        "parameters": [],
        "security": [{ "Bearer": [] }],
        "requestBody": {
          "description": "User changes profile object",
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful update",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserUpdateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request (invalid request body)"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    },
    "/api/auth/current": {
      "get": {
        "tags": ["Auth"],
        "summary": "Get current user",
        "parameters": [],
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "multipart/form-data": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },

    "/api/reviews": {
      "get": {
        "tags": ["Reviews"],
        "summary": "Get all reviews of all users",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "multipart/form-data": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewsArrayResponse"
                }
              }
            }
          },
          "404": {
            "description": "There are currently no reviews"
          }
        }
      }
    },
    "/api/reviews/own": {
      "get": {
        "tags": ["Reviews"],
        "summary": "Get own review to the user",
        "parameters": [],
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "multipart/form-data": {
                "schema": {
                  "$ref": "#/components/schemas/OwnReviewGetResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not found"
          }
        }
      },
      "post": {
        "tags": ["Reviews"],
        "summary": "Set own review to the user",
        "parameters": [],
        "security": [{ "Bearer": [] }],
        "requestBody": {
          "description": "Set own user`s review object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OwnReviewSetRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OwnReviewSetResponse"
                }
              }
            }
          },
          "400": {
            "description": "You already have review"
          },
          "404": {
            "description": "User not found"
          }
        }
      },
      "patch": {
        "tags": ["Reviews"],
        "summary": "Update own user review",
        "parameters": [],
        "security": [{ "Bearer": [] }],
        "requestBody": {
          "description": "User`s review update object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OwnReviewUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OwnReviewUpdateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "404": {
            "description": "Not found"
          }
        }
      },
      "delete": {
        "tags": ["Reviews"],
        "summary": "Delete own user review",
        "parameters": [],
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "review deleted"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Not found"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "RegistrationRequest": {
        "type": "object",
        "required": ["name", "email", "password"],
        "properties": {
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "Bob Smith"
          },
          "email": {
            "type": "string",
            "description": "User's email",
            "pattern": "^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "minLength": 7,
            "example": "qwertonity"
          }
        }
      },
      "RegistrationResponse": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "Bob Smith"
          },
          "email": {
            "type": "string",
            "description": "User's email",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "minLength": 7,
            "example": "$2a$10$k1/ys98HAHEZMe0E4vGcxeS1k7TW6TZyXDwNbyzDgnPNne9zIb.e6"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": {
            "type": "string",
            "description": "User's email",
            "pattern": "^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "minLength": 7,
            "example": "qwertonity"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User's email",
            "pattern": "^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "minLength": 7,
            "example": "$2a$10$k1/ys98HAHEZMe0E4vGcxeS1k7TW6TZyXDwNbyzDgnPNne9zIb.e6"
          },
          "token": {
            "type": "string",
            "description": "Access token for authorization",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0ZDYwMTRiMzBmZTlhODA2NDI5ZDFmNCIsImlhdCI6MTY5MTc0NjYzNSwiZXhwIjoxNjkxODI5NDM1fQ.dAtkjqFYB_I4r6vBHWY6d2A2kSuDpkRle9wXfG7mw1A"
          }
        }
      },
      "CurrentUserResponse": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "User's database id",
            "example": "64d898042763ba4ad83d4d0a"
          },
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "Bob Smith"
          },
          "email": {
            "type": "string",
            "description": "User's email",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "minLength": 7,
            "example": "$2a$10$k1/ys98HAHEZMe0E4vGcxeS1k7TW6TZyXDwNbyzDgnPNne9zIb.e6"
          },
          "token": {
            "type": "string",
            "description": "Access token for authorization",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0ZDc4NjlhOTI0NGZkYWYxMWNhZDBhZiIsImlhdCI6MTY5MTg0Nzc3OSwiZXhwIjoxNjkxOTMwNTc5fQ.VZhXjSMaN1l5jz656ClCdKAFQaF4GQ_ak2OqafUk0Kc"
          },
          "isReview": {
            "type": "boolean",
            "description": "Does the user have a review?"
          },
          "avatarURL": {
            "type": "string",
            "format": "uri",
            "description": "User's avatar",
            "example": "https://res.cloudinary.com/example/image"
          },
          "skype": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "birthday": {
            "type": "string",
            "format": "date"
          }
        }
      },
      "UserUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "Bob Smith"
          },
          "email": {
            "type": "string",
            "description": "User's email",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "minLength": 7,
            "example": "qwertonity"
          },
          "avatarURL": {
            "type": "string",
            "format": "uri",
            "description": "User's avatar",
            "example": "https://res.cloudinary.com/example/image"
          },
          "birthday": {
            "type": "string",
            "format": "date"
          },
          "skype": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          }
        }
      },
      "UserUpdateResponse": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "User's database id",
            "example": "64d898042763ba4ad83d4d0a"
          },
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "Bob Smith"
          },
          "email": {
            "type": "string",
            "description": "User's email",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "minLength": 7,
            "example": "$2a$10$k1/ys98HAHEZMe0E4vGcxeS1k7TW6TZyXDwNbyzDgnPNne9zIb.e6"
          },
          "token": {
            "type": "string",
            "description": "Access token for authorization",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0ZDc4NjlhOTI0NGZkYWYxMWNhZDBhZiIsImlhdCI6MTY5MTg0Nzc3OSwiZXhwIjoxNjkxOTMwNTc5fQ.VZhXjSMaN1l5jz656ClCdKAFQaF4GQ_ak2OqafUk0Kc"
          },
          "isReview": {
            "type": "boolean",
            "description": "Does the user have a review?"
          },
          "avatarURL": {
            "type": "string",
            "format": "uri",
            "description": "User's avatar",
            "example": "https://res.cloudinary.com/example/image"
          },
          "createdAt": {
            "type": "string",
            "format": "date"
          },
          "updatedAt": {
            "type": "string",
            "format": "date"
          },
          "birthday": {
            "type": "string",
            "format": "date"
          },
          "phone": {
            "type": "string"
          },
          "skype": {
            "type": "string"
          }
        }
      },
      "ReviewsArrayResponse": {
        "type": "object",
        "properties": {
          "reviews": {
            "type": "array",
            "description": "Array of all user's reviews",
            "items": {
              "type": "object",
              "required": ["review", "rating"],
              "properties": {
                "_id": {
                  "type": "string",
                  "description": "Review database id",
                  "example": "64d7869a9244fdaf11cad0af"
                },
                "review": {
                  "type": "string",
                  "description": "User review",
                  "maxLength": 300,
                  "example": "This is a very useful web application"
                },
                "rating": {
                  "type": "number",
                  "description": "User's rating",
                  "maxLength": 1,
                  "example": 3
                },
                "owner": {
                  "type": "string",
                  "description": "User's database id",
                  "example": "64d7869a9244fdaf11cad0af"
                },
                "name": {
                  "type": "string",
                  "description": "User's name",
                  "example": "Bob Smith"
                },
                "avatarURL": {
                  "type": "string",
                  "format": "uri",
                  "description": "User's avatar",
                  "example": "https://res.cloudinary.com/example/image"
                },
                "createdAt": {
                  "type": "string",
                  "format": "date"
                },
                "updatedAt": {
                  "type": "string",
                  "format": "date"
                }
              }
            }
          },
          "total": {
            "type": "number",
            "description": "Total review`s count",
            "example": 6
          }
        }
        
      },
      "OwnReviewGetResponse": {
        "type": "object",
        "properties": {
          "review": {
            "type": "string",
            "description": "User review",
            "maxLength": 300,
            "example": "This is a very useful web application"
          },
          "rating": {
            "type": "number",
            "description": "User's rating",
            "maxLength": 1,
            "example": 3
          },
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "Bob Smith"
          },
          "avatarURL": {
            "type": "string",
            "format": "uri",
            "description": "User's avatar",
            "example": "https://res.cloudinary.com/example/image"
          }
        }
      },
      "OwnReviewSetRequest": {
        "type": "object",
        "required": ["review", "rating"],
        "properties": {
          "review": {
            "type": "string",
            "description": "User review",
            "maxLength": 300,
            "example": "This is a very useful web application"
          },
          "rating": {
            "type": "number",
            "description": "User's rating",
            "maxLength": 1,
            "example": 4
          }
        }
      },
      "OwnReviewSetResponse": {
        "type": "object",
        "properties": {
          "review": {
            "type": "string",
            "description": "User review",
            "maxLength": 300,
            "example": "This is a very useful web application"
          },
          "rating": {
            "type": "number",
            "description": "User's rating",
            "maxLength": 1,
            "example": 4
          },
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "Bob Smith"
          }
        }
      },
      "OwnReviewUpdateRequest": {
        "type": "object",
        "properties": {
          "review": {
            "type": "string",
            "description": "User review",
            "maxLength": 300,
            "example": "This is a very useful web application"
          },
          "rating": {
            "type": "number",
            "description": "User's rating",
            "maxLength": 1,
            "example": 5
          }
        }
      },
      "OwnReviewUpdateResponse": {
        "type": "object",
        "properties": {
          "review": {
            "type": "string",
            "description": "User review",
            "maxLength": 300,
            "example": "This is a very useful web application"
          },
          "rating": {
            "type": "number",
            "description": "User's rating",
            "maxLength": 1,
            "example": 5
          },
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "Bob Smith"
          }
        }
      }
    },
    "securitySchemes": {
      "Bearer": {
        "type": "http",
        "scheme": "bearer",
        "BearerFormat": "JWT"
      }
    }
  }
}
